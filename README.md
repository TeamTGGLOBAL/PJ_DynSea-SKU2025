# Project DynSea SKU (プロジェクト ダイナシーエスケーユー)

[![Project Status: Active](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)

**「情報の粒度」を自在に操り、水産業の未来をデータで描く。**

## 1. 私たちが解くべき「本当の課題」

生鮮海産物の世界は、常に「不確実性」との戦いです。このプロジェクトは当初、「SKUの多さ」や「データ化の困難さ」を課題として捉えていました。しかし、議論を深める中で、私たちはより本質的な課題にたどり着きました。

それは、**「ビジネスの場面ごとに要求される情報の『粒度』を、柔軟かつ効率的に制御できないこと」**です。

### 粒度のミスマッチが引き起こす問題

*   **大まかな見積もりが欲しい時:**
    *   **要求:** `「ヒラメ、だいたいいくら？」`
    *   **現状:** 個別の細かいデータしかなく、瞬時に相場を提示できない。
*   **サイズ別の在庫を知りたい時:**
    *   **要求:** `「ヒラメの大きいやつ、何枚ある？」`
    *   **現状:** 「ヒラメ」という大雑把な括りでしか管理しておらず、正確な在庫が分からない。
*   **詳細なトレーサビリティ情報が必要な時:**
    *   **要求:** `「あの料亭に納品したヒラメ、いつ誰が獲ったやつ？」`
    *   **現状:** そもそも個体レベルで管理されていないため、追跡が不可能。

*   **現状のシステム・慣行の限界:**
    *   従来の管理方法（手書き伝票、Excel、固定SKUシステム）は、**特定の粒度にしか対応できない**という問題を抱えています。
    *   「鮃 1,200円/kg」という粗い情報しか管理していなければ、サイズ別の詳細な問い合わせには応えられません。
    *   逆に、全ての魚を個体レベルで管理しようとすると、SKUが爆発し、大まかな見積もりを出す際に集計が非常に煩雑になります。

このように、現場では**粗い粒度から細かい粒度まで、様々なレベルの情報**が求められます。しかし、従来の管理手法は特定の粒度にしか対応できず、この「粒度のミスマッチ」が非効率、機会損失、そして情報の不透明性を生み出していたのです。


**2. 解決策の提案：JSONライクな階層的データモデルの導入**
この「粒度の違い」という課題を解決するため、データモデルの根本的な見直しを提案します。それは、まるでJSONのように、**親子関係を持つ階層的なデータ構造**で海産物を管理するというアプローチです。

一つの魚種を「親」とし、サイズや品質、加工方法といったバリエーションを「子」、そして個々のロットや個体を「孫」として捉えることで、情報の粒度を自在にコントロールします。

**2.1. データモデルの概念図**
```json
{
  "product_id": "PROD-HIRAME",
  "product_name": "鮃",
  "origin_id": "ORG-HOKKAIDO",
  "origin_name": "北海道産",
  "base_price": 1200, // 基本単価 (kgあたり)
  "price_range": "1200-1500", // 参考価格帯
  "description": "北海道で獲れた天然のヒラメです。",
  "variants": [ // ここが「粒度」の階層
    {
      "variant_id": "VAR-HIRAME-L",
      "size": "大",
      "weight_spec": "1kg up",
      "price": 1500,
      "stock_quantity": 20, // 在庫数（枚）
      "lots": [ // さらに細かい粒度（ロット/個体）
        {
          "lot_id": "LOT-240515-001", // これがDynamic SKUに相当
          "arrival_date": "2024-05-15",
          "weight": 1.2, // kg
          "quality": "神経締め",
          "fisherman_id": "FSH-007",
          "notes": "右向き、美品"
        },
        {
          "lot_id": "LOT-240515-002",
          "arrival_date": "2024-05-15",
          "weight": 1.1,
          "quality": "A品",
          "fisherman_id": "FSH-007"
        }
      ]
    },
    {
      "variant_id": "VAR-HIRAME-S",
      "size": "小",
      "weight_spec": "500g-800g",
      "price": 1200,
      "stock_quantity": 50,
      "lots": [
        // ... 小サイズのロット情報
      ]
    }
  ]
}
```

### このモデルがもたらす革新

**2.2. このモデルの優位性**

*   **粒度の柔軟な出力:**
*   **柔軟な情報出力:** 要求に応じて、必要な階層（粒度）のデータだけを瞬時に取り出すことが可能になります。
    *   **粗い粒度:** トップレベルの `product_name` と `price_range` を出力すれば、「鮃（北海道産） 1,200～1,500円/kg」という見積もりが可能です。
    *   **中くらいの粒度:** `variants` 配列をループし、`size` と `price` を出力すれば、「鮃 大 1,500円/kg」「鮃 小 1,200円/kg」というサイズ別見積もりが可能です。
    *   **細かい粒度:** `lots` 配列の情報にアクセスすれば、個体ごとの詳細なトレーサビリティ情報を提供できます。
*   **「動的SKU」の本質を内包:**
*   **動的SKUの内包:** 個々のロット（孫）が、まさに「動的に生成されるSKU」そのもの。複雑だった概念を、自然なデータ構造の中に整理できます。
    *   `lots` 配列に追加される個々のロット情報（`lot_id`）が、まさしく**「動的に生成されるSKU」**そのものとなります。
    *   「Dynamic SKU」は、この階層モデルの最下層に位置づけられる概念として整理できます。
*   **拡張性:**
*   **無限の拡張性:** 新しい規格や管理項目（例：加工方法、雌雄）ができても、新たな「子」や「孫」として階層を追加するだけで柔軟に対応できます。
    *   将来的に「加工方法（フィレ、昆布締めなど）」や「雌雄」といった新しい属性が必要になった場合でも、`variants` や `lots` の中に新たなプロパティを追加するだけで柔軟に対応できます。
*   **システム親和性:**
    *   このデータ構造は、JSON形式をネイティブに扱える現代のデータベース（NoSQL DBやPostgreSQLのJSONB型など）やAPIとの相性が抜群に良いです。


## 3. プロジェクトのゴール

**Project DynSea SKU** は、この階層的データモデルを中核に据え、以下のゴールを実現します。

1.  **あらゆる粒度の要求に応える情報基盤の構築:**
    経営判断に必要なマクロな視点から、トレーサビリティ確保に必要なミクロな視点まで、一つのデータソースで対応する。
2.  **現場の負担を最小化するデータ入力フローの実現:**
    入力する情報は一つでも、システムが自動的に階層構造を整理し、各場面で最適な情報を提供する。
3.  **データによる新たな価値創造:**
    これまで見えなかった「規格外品」の隠れた需要を発見したり、詳細なデータに基づいた付加価値の高い商品提案を可能にする。

## 4. 現在のステータスとロードマップ

私たちは今、この革新的なアプローチの有効性を証明するための段階にいます。

-   [x] **Phase 0: 課題の再定義とコンセプト確立**
    -   [x] 「粒度の柔軟性」という本質的課題の特定。
    -   [x] 階層的データモデルの基本構想完了。
-   [ ] **Phase 1: データモデルの設計とプロトタイピング (現在進行中)**
    -   [ ] 主要魚種を対象とした具体的なJSONスキーマの設計。
    -   [ ] 簡易的なデータ登録・閲覧ツールの開発を通じた操作性の検証 (PoC)。
    -   [ ] 粒度別データ出力APIの試作と検証。
-   [ ] **Phase 2: MVP（Minimum Viable Product）開発**
    -   [ ] 階層データを本格的に扱えるデータベースとAPIの構築。
    -   [ ] パイロット導入と効果測定。
-   [ ] **Phase 3: 本格展開とデータ活用の深化**
    -   [ ] 全社・全部門への展開と、データ分析基盤の構築。

詳細は [Projects](link-to-your-project-board) ボードで管理しています。

非常に鋭く、本質的なご指摘だと思います！おっしゃる通り、このプロジェクトの核心は「動的SKU」という言葉そのものよりも、**「要求される情報の『粒度』に柔軟に対応できるデータ構造」**にあると言えます。

「粒度の違い」という視点は、これまでの議論をさらに深化させる素晴らしい気づきです。そして、その解決策として**JSONのような階層構造でデータを管理する**というアイデアは、まさにこの問題に対するエレガントなアプローチです。

この考え方を整理し、検証していくためのドキュメントを作成しましょう。

---

**3. 検証計画：1つずつ検証していくために**

この新しいデータモデルの有効性を検証するため、以下のステップで進めることを提案します。

*   **ステップ1：データモデルの設計とプロトタイピング (1-2週間)**
    *   **目的:** 主要な魚種（例：ヒラメ、サバ、ホッケ）を対象に、階層的データモデルの具体的なスキーマを設計する。
    *   **手法:** 実際にJSONファイルとしてデータを作成し、様々な粒度での情報出力が問題なく行えるかを手元でシミュレーションする。
    *   **成果物:** 標準的なデータモデルのJSONスキーマ定義。
*   **ステップ2：簡易的なデータ登録・閲覧ツールの開発 (PoC) (1ヶ月)**
    *   **目的:** 現場担当者がこの階層データを実際に入力・閲覧できるか、その操作性を検証する。
    *   **手法:** Google Apps Scriptとスプレッドシート、または簡易的なWebアプリを開発。トップレベルの情報と、`variants`レベルの情報を入力すると、`lots`（動的SKU）が自動的に登録されるような仕組みを試作する。
    *   **成果物:** プロトタイプツール、現場からのフィードバックレポート。
*   **ステップ3：APIによる粒度別データ出力の検証 (PoC)**
    *   **目的:** 開発したツールから、要求された粒度に応じて適切なデータを返すAPIのエンドポイントを試作し、その有効性を検証する。
    *   **手法:**
        *   `/products/PROD-HIRAME` → 粗い粒度の情報を返す
        *   `/products/PROD-HIRAME/variants` → 中くらいの粒度の情報を返す
        *   `/lots/LOT-240515-001` → 細かい粒度の情報を返す
    *   **成果物:** APIの仕様書（ドラフト）、APIの動作検証レポート。

**4. 結論：真の課題は「粒度の制御」**

「Project DynSea SKU」が解決すべき真の課題は、「SKUの多さ」そのものではなく、**「ビジネスの場面ごとに要求される情報の粒度を、柔軟かつ効率的に制御できないこと」**です。

JSONライクな階層的データモデルは、この本質的な課題に対する強力な解決策となり得ます。このモデルを中核に据えることで、「動的SKU」の概念をより洗練された形でシステムに組み込み、真に柔軟で拡張性の高いデータ基盤を構築できると確信しています。

まずは、提案した検証計画に沿って、このアプローチの有効性を一つずつ証明していきましょう。


## 5. 開発とコントリビューション

このプロジェクトは、水産業界の未来を本気で変えたいと考えるすべての人のためのものです。

### 開発環境

*   **コアコンセプト:** 階層的データモデル (JSON-like)
*   **バックエンド:** Node.js / Python, サーバーレス, PostgreSQL (JSONB)
*   **フロントエンド:** React / Vue.js
*   **インフラ:** Google Cloud / AWS
*   **開発ツール:** Cursor, GitHub, etc.

セットアップ手順の詳細は [`SETUP.md`](SETUP.md) を参照してください。

### 貢献方法

バグ報告、機能提案、ドキュメントの改善、そしてもちろんコードによる貢献も大歓迎です。
詳細は [`CONTRIBUTING.md`](CONTRIBUTING.md) をご覧ください。
